<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/bootstrap.min.css.map" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="flag/build/css/intlTelInput.min.css" />
    <link rel="stylesheet" href="css/animate.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <title>Key code</title>
  </head>
  <body>
    <div class="nav-layer"></div>
    <!--start loader-->
    <div class="loader">
      <div class="logo-co-p">
        <img src="imgs/Group 96420.png" alt="" />
      </div>
      <div id="progressbar"></div>
    </div>
    <!--End loader-->

    <!--start content-->
    <div class="img-background">
      <img src="imgs/adrian-sulyok-scfzNLg6rrhQ-unsplash (1).png" alt="" />
    </div>
    <div class="choose-login">
      <div class="login-box">
        <div class="container">
          <div class="row h-100 reverse-mobile">
            <div class="col-lg-6 mb-3">
              <form action="" class="h-100">
                <div class="right-login h-100">
                  <div class="spe-container w-100">
                    <div class="flex-group-me">
                      <h5 class="main-title mb-3">مرحبا بك</h5>
                    </div>
                    <div class="flex-group-me mb-2">
                      <img class="key-codeimg" src="imgs/code.png" alt="" />
                    </div>
                    <h6 class="font-bold text-center">كود التفعيل</h6>
                    <p class="gray-col font13 text-center">
                      برجاء ادخال كود التفعيل المرسل اليك عبر الجوال
                    </p>

                    <div class="code-container">
                      <input id="key-code" hidden type="text" value="" />
                      <input
                        type="number"
                        class="code"
                        min="0"
                        max="9"
                        required
                      />
                      <input
                        type="number"
                        class="code"
                        min="0"
                        max="9"
                        required
                      />
                      <input
                        type="number"
                        class="code"
                        min="0"
                        max="9"
                        required
                      />
                      <input
                        type="number"
                        class="code"
                        min="0"
                        max="9"
                        required
                      />
                      <input
                        type="number"
                        class="code"
                        min="0"
                        max="9"
                        required
                      />
                      <input
                        type="number"
                        class="code"
                        min="0"
                        max="9"
                        required
                      />
                    </div>
                    <div class="flex-group-me gap-30">
                      <div class="dont-have font14 gray-col">
                        لم تستلم الكود بعد؟
                        <button
                          type="button"
                          id="js-startTimer"
                          data-time="0:30"
                          href="register.html"
                        >
                          اعد ارسال الكود
                        </button>
                      </div>
                      <span class="js-timeout">0:30</span>
                    </div>
                    <button
                      type="button"
                      class="full-width-btn mt-4 main-btn w-100 up mb-3 key-ajax "
                    >
                       تاكيد
                    </button>
                  </div>
                </div>
              </form>
            </div>
            <div class="col-lg-6 mb-3">
              <div class="left-login flex-group-me h-100">
                <div class="spe-container img-bg">
                  <img src="imgs/Group 96420.png" alt="" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--end content-->

    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="flag/build/js/intlTelInput.min.js"></script>

    <script src="js/main.js"></script>
    <script>
      new WOW().init();
    </script>

    <!--get key code-->
    <script>
      $(document).ready(function () {
        let codes = document.querySelectorAll(".code");

        $(".code-container .code").first().focus();

        codes.forEach((code, idx) => {
          code.addEventListener("keydown", (e) => {
            if (e.key >= 0 && e.key <= 9) {
              codes[idx].value = "";
              if ([idx + 1] < codes.length) {
                setTimeout(() => codes[idx + 1].focus(), 10);
              }
            } else if (e.key === "Backspace") {
              setTimeout(() => codes[idx - 1].focus(), 10);
            }
          });
        });
        // add key code value to  hidden input
        let HiddenInp = document.querySelector("#key-code");
        let AjaxBtn = document.querySelector(".key-ajax");
        let inpArray = [];
        AjaxBtn.addEventListener("click", function () {
          for (let i = 0; i < codes.length; i++) {
            inpArray.push(codes[i].value);
          }
          let inpValReal = inpArray.join("");
          HiddenInp.value = inpValReal;
          inpArray = [];
        });
      });
    </script>
    <!-- timer code -->
    <script>
      var interval;

      function countdown() {
        clearInterval(interval);
        interval = setInterval(function () {
          var timer = $(".js-timeout").html();
          timer = timer.split(":");
          var minutes = timer[0];
          var seconds = timer[1];
          seconds -= 1;
          if (minutes < 0) return;
          else if (seconds < 0 && minutes != 0) {
            minutes -= 1;
            seconds = 59;
          } else if (seconds < 10 && length.seconds != 2)
            seconds = "0" + seconds;

          $(".js-timeout").html(minutes + ":" + seconds);

          if (minutes == 0 && seconds == 0) clearInterval(interval);
        }, 1000);
      }

      $("#js-startTimer").click(function () {
        $(".js-timeout").text($(this).data('time'));
        countdown();
      });
      countdown();
    </script>
  </body>
</html>
